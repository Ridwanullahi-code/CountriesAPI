// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Define the model for Country
model Country {
  id               Int      @id @default(autoincrement())
  name             String   @unique
  alpha2Code       String   @unique
  alpha3Code       String
  capital          String
  population       Int
  region           String
  subregion        String
  area             Int?
  flag             String
  callingCodes     String[]
  timezones        String[]
  borders          String[]
  currencies       Currency[]
  government       Government?
  gdp             GDP?
}

// Define the model for Currency
model Currency {
  id              Int      @id @default(autoincrement())
  code            String
  name            String
  symbol          String
  exchangeRate    Float    @default(1.0)
  isCrypto        Boolean  @default(false) 
  centralBank     String? 
  isFiat          Boolean  @default(true) 
  notes           String? 
  country         Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
  countryId       Int      @unique
}

// Define the model for Government
model Government {
  id                     Int      @id @default(autoincrement())
  system                 String   @unique
  headOfState            String
  rulingParty            String
  electionSystem         String
  electionCycle          Int
  highestCourt           String   @default("Supreme Court")
  judicialIndependence   Boolean  @default(false)
  freedomOfExpression   Boolean  @default(false)
  equalityBeforeLaw     Boolean  @default(false)
  country                Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
  countryId              Int      @unique
}

// Define the model for GDP
model GDP {
  id                  Int      @id @default(autoincrement())
  total               Float
  perCapita           Float
  growthRate          Float
  currency            String
  agriculture         Float
  industry            Float
  services            Float
  exports             Json
  imports             Json
  externalDebt        Float
  governmentSpending  Json
  grossInvestment     Float
  fixedInvestment     Float
  inventoryInvestment Float
  unemploymentRate    Float
  inflationRate       Float
  country        Country  @relation(fields: [countryId], references: [id], onDelete: Cascade)
  countryId           Int      @unique
}